# Test Plan — Hotel Booking System

**Тест-план охоплює модулі автентифікації, управління користувачами, бронювання, доступу за ролями, а також нефункціональні аспекти**

| № | Компонент / функція | Рівень тесту | Тип (позитивний / негативний) | Очікуваний результат / критерій прийняття                                                                           | Власник тесту |
|---|----------------------|---------------|--------------------------------|---------------------------------------------------------------------------------------------------------------------|----------------------|
| 1 |Реєстрація користувача POST /api/v1/auth/register (`register`) |Unit|Позитивний| Користувач успішно зареєстрований, повертається статус 201, створюється запис у БД                                  |Правило Анастасія|
| 2 | Створення користувача `create_user(db, new_user)` (src/api/services/user_service.py) | Unit |Позитивний| Функція генерує валідний email та phone; словник new_user містить всі необхідні поля                                | Катерина Демʼянік|
| 3 |Реєстрація користувача POST /api/v1/auth/register (`register`) |Unit|Негативний| При спробі реєстрації вже з існуючим email, повертається помилка 400 (**US-004.2**)                                 |Правило Анастасія|
| 4 | Перегляд бронювань GET /api/v1/bookings/user/{user_id} (`UserBookings.get`) |Integration|Позитивний| Користувач бачить список своїх бронювань  (**US-007.1**)                                                            |Катерина Демʼянік|
| 5 | Перегляд бронювань POST /api/v1/bookings (`BookingList.post`) |Integration|Негативний| При спробі забронювати вже зайнятий номер система повертає помилку “Номер зайнятий” чи “Недоступний” (**US-005.2**) |Катерина Демʼянік|
| 6 | Отримання списку користувачів GET /api/v1/users (`UserList.get`) | Integration |Позитивний| GET-запит до /api/v1/users повертає статус 200 і містить список користувачів.                                       |Катерина Демʼянік|
| 7 |Створення користувача POST /api/v1/users (`UserList.post`) |Integration | Негативний | POST-запит із дублікатом email повертає статус 400; користувач не створюється (**US-004.2**)                        |Катерина Демʼянік|
| 8 |Оновлення токену GET /api/v1/auth/refresh (`refresh_token`) |Unit|Позитивний| При валідному токені генерується новий токен                                                                        |Правило Анастасія|
| 9 |Оновлення токену GET /api/v1/auth/refresh (`refresh_token`) |Unit|Негативний| При невалідному або простороченому токені повертається 401                                                          | Правило Анастасія |
| 10 |Видалення користувача DELETE /api/v1/users/{id} (`UserResource.delete`) | Integration| Позитивний| DELETE-запит повертає статус 204; GET після видалення повертає 404, користувач видаляється                          |Катерина Демʼянік|
| 11 |Бронювання номера POST /api/v1/bookings (`BookingList.post`) |Integration|Позитивний| Користувач може створити бронювання для доступного номера на вказані дати (**US-008.1**)                            |Катерина Демʼянік|
| 12 |Бронювання номера POST /api/v1/bookings (`BookingList.post`) |Integration|Негативний| При спробі забронювати зайнятий номер система повертає помилку “Room not available”  (**US-005.2**)                 |Катерина Демʼянік|
| 13 |Отримання списку користувачів Функція `get_all_users(db)` (src/api/services/user_service.py) |Unit|Позитивний | GET повертає (list) список користувачів                                                                             |Катерина Демʼянік|
| 14 | SEC-01: Доступ до даних відповідно до ролей GET /api/v1/bookings/user/{user_id} | System | Негативний | Користувач без прав адміністратора не може переглядати чужі бронювання (403).                                       | Катерина Демʼянік |
| 15 | REL-03: База даних бронювань не допускає дублювання записів і гарантує цілісність даних POST /api/v1/bookings | Integration | Негативний | При спробі створити дублікат бронювання система відхиляє запит, цілісність даних зберігається (409)  (**US-005.2**) | Катерина Демʼянік |

## Короткий опис поведінки, до якого належить кожен тест 

| Вимога                                | Тест| Коментар |
|---------------------------------------|-------------|----------|
| **FR-004**: Реєстрація користувачів   | 1 – 3 | Перевіряє створення і валідацію нових облікових записів |
| **FR-003/8**: Управління бронюваннями | 4 – 5, 11 – 12 | Перевірка створення та отримання бронювань |
| **FR-010/12**: Робота з користувачами | 6 – 7, 10, 13 | CRUD-операції для користувачів |
| **FR-012, SEC-01**: Контроль доступу за ролями | 14 | Безпека та авторизація |
| **FR-003, REL-03**: Цілісність даних  | 15 | Захист від дублікатів бронювань |
